<!DOCTYPE html>
<html lang="en">

<head>
    <title>Chat Example</title>
    <script type="text/javascript">
        window.onload = function () {
            if (window["WebSocket"]) {
                conn = new WebSocket("ws://localhost:8000/ws");
                conn.onclose = function (evt) {
                    var item = document.createElement("div");
                    item.innerHTML = "<strong>Socket Disconnected.</strong>";

                    document.getElementById("log").appendChild(item);

                    console.log(evt);
                };
                conn.onmessage = function (evt) {
                    console.log(evt);

                    var data = JSON.parse(evt.data);

                    if (Array.isArray(data)) {
                        data.forEach(function(val) {
                            var item = document.createElement("div");
                            item.innerHTML = "<strong>Worker " +val.name + ".</strong>";

                            document.getElementById("log").appendChild(item);
                        });
                    } else {
                        var item = document.createElement("div");
                        item.innerHTML = "<strong>Worker " +data.worker.name + " - " + data.type + ".</strong>";

                        document.getElementById("log").appendChild(item);
                    }
                };
            } else {
                var item = document.createElement("div");
                item.innerHTML = "<b>Your browser does not support WebSockets.</b>";
                appendLog(item);
            }
        };
    </script>
</head>

<body>
    <div id="log"></div>
</body>

</html>